(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var SWMap, data, i, p, unemployment_map, _i, _len;

SWMap = require('./script/SWMap');

data = Highcharts.geojson(Highcharts.maps['custom/world']);

for (i = _i = 0, _len = data.length; _i < _len; i = ++_i) {
  p = data[i];
  p.value = i + 1;
  p.drilldown = true;
}

unemployment_map = new SWMap({
  data: data
});

$(function() {
  return unemployment_map.attach($('#map'));
});



},{"./script/SWMap":2}],2:[function(require,module,exports){
var SWMap, default_opts;

default_opts = require('./sw_map_options');

SWMap = (function() {
  function SWMap(options) {
    var series;
    this.opts = default_opts;
    series = this.opts.series[0];
    series.data = options.data;
    series.mapData = options.mapData;
    series.joinBy = options.joinBy;
    this.opts.chart.events.drilldown = (function(_this) {
      return function(e) {
        return _this._handle_drilldown(e);
      };
    })(this);
    this.opts.chart.events.drillup = (function(_this) {
      return function(e) {
        return _this._handle_drillup(e);
      };
    })(this);
  }

  SWMap.prototype.attach = function($el) {
    return this.chart = $el.highcharts('Map', this.opts);
  };

  SWMap.prototype._handle_drilldown = function(e) {
    var chart, map_key;
    chart = e.currentTarget;
    if (!e.seriesOptions) {
      map_key = this._map_key_from_point(e.point);
      if (!Highcharts.maps[map_key]) {
        chart.showLoading('<i class="icon-spinner icon-spin icon-3x"></i>');
        return $.getScript(this._map_data_url(map_key)).done((function(_this) {
          return function() {
            _this._do_drilldown(chart, e.point, map_key);
            return chart.hideLoading();
          };
        })(this)).fail((function(_this) {
          return function() {
            console.log('failed to get map data.');
            return chart.hideLoading();
          };
        })(this));
      } else {
        return this._do_drilldown(chart, e.point, map_key);
      }
    }
  };

  SWMap.prototype._do_drilldown = function(chart, point, map_key) {
    var data, i, p, _i, _len;
    data = Highcharts.geojson(Highcharts.maps[map_key]);
    for (i = _i = 0, _len = data.length; _i < _len; i = ++_i) {
      p = data[i];
      p.value = i + 1;
      p.drilldown = this._point_can_drilldown(p);
    }
    return chart.addSeriesAsDrilldown(point, {
      name: point.name,
      data: data,
      dataLabels: {
        enabled: true,
        format: '{point.name}'
      }
    });
  };

  SWMap.prototype._map_key_from_point = function(point) {
    var ans, country, hc_key, parts;
    hc_key = point.properties['hc-key'];
    parts = hc_key.split('-');
    if (!parts.length) {
      return void 0;
    }
    country = parts[0];
    ans = "countries/" + country + "/" + hc_key + "-all";
    return ans;
  };

  SWMap.prototype._map_data_url = function(map_key) {
    return 'http://code.highcharts.com/mapdata/' + map_key + '.js';
  };

  SWMap.prototype._point_can_drilldown = function(point) {
    var hc_key, parts;
    hc_key = point.properties['hc-key'];
    parts = hc_key.split('-');
    if (!parts.length) {
      return false;
    }
    if (parts.length === 1) {
      return true;
    }
    if (parts.length === 2 && parts[0] === 'us') {
      return true;
    }
    return false;
  };

  SWMap.prototype._handle_drillup = function(e) {
    return console.log('drill up');
  };

  return SWMap;

})();

module.exports = SWMap;



},{"./sw_map_options":3}],3:[function(require,module,exports){
module.exports = {
  chart: {
    borderWidth: 0,
    borderColor: '#759F00',
    events: {
      drilldown: null,
      drillup: null
    }
  },
  title: {
    text: 'Waivers'
  },
  legend: {
    layout: 'vertical',
    borderWidth: 0,
    backgroundColor: 'rgba(255,255,255,0.85)',
    floating: false,
    verticalAlign: 'middle',
    align: 'left',
    y: 50
  },
  mapNavigation: {
    enabled: true
  },
  colorAxis: {
    min: 1,
    type: 'logarithmic',
    minColor: '#FFFFFF',
    maxColor: '#759F00'
  },
  series: [
    {
      animation: {
        duration: 1000
      },
      data: null,
      mapData: null,
      joinBy: null,
      dataLabels: {
        enabled: true,
        color: 'white',
        format: '{point.name}'
      },
      name: 'World',
      tooltip: {
        pointFormat: '{point.name}: {point.value}/kmÂ²'
      }
    }
  ],
  drilldown: {
    activeDataLabelStyle: {
      color: 'white',
      textDecoration: 'none'
    },
    drillUpButton: {
      relativeTo: 'spacingBox',
      position: {
        x: 0,
        y: 0
      }
    }
  }
};



},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9qZXJlbWlhaC9Db2RlL2dpdGh1YnMvaGlnaG1hcHMvbm9kZV9tb2R1bGVzL3dhdGNoaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMvamVyZW1pYWgvQ29kZS9naXRodWJzL2hpZ2htYXBzL3NyYy9hcHAuY29mZmVlIiwiL1VzZXJzL2plcmVtaWFoL0NvZGUvZ2l0aHVicy9oaWdobWFwcy9zcmMvc2NyaXB0L1NXTWFwLmNvZmZlZSIsIi9Vc2Vycy9qZXJlbWlhaC9Db2RlL2dpdGh1YnMvaGlnaG1hcHMvc3JjL3NjcmlwdC9zd19tYXBfb3B0aW9ucy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNDQSxJQUFBLDZDQUFBOztBQUFBLEtBQUEsR0FBUSxPQUFBLENBQVEsZ0JBQVIsQ0FBUixDQUFBOztBQUFBLElBT0EsR0FBTyxVQUFVLENBQUMsT0FBWCxDQUFtQixVQUFVLENBQUMsSUFBSyxDQUFBLGNBQUEsQ0FBbkMsQ0FQUCxDQUFBOztBQVVBLEtBQUEsbURBQUE7Y0FBQTtBQUNFLEVBQUEsQ0FBQyxDQUFDLEtBQUYsR0FBVSxDQUFBLEdBQUUsQ0FBWixDQUFBO0FBQUEsRUFDQSxDQUFDLENBQUMsU0FBRixHQUFjLElBRGQsQ0FERjtBQUFBLENBVkE7O0FBQUEsZ0JBY0EsR0FBdUIsSUFBQSxLQUFBLENBQ3JCO0FBQUEsRUFBQSxJQUFBLEVBQU0sSUFBTjtDQURxQixDQWR2QixDQUFBOztBQUFBLENBaUJBLENBQUUsU0FBQSxHQUFBO1NBQ0EsZ0JBQWdCLENBQUMsTUFBakIsQ0FBd0IsQ0FBQSxDQUFFLE1BQUYsQ0FBeEIsRUFEQTtBQUFBLENBQUYsQ0FqQkEsQ0FBQTs7Ozs7QUNBQSxJQUFBLG1CQUFBOztBQUFBLFlBQUEsR0FBZSxPQUFBLENBQVEsa0JBQVIsQ0FBZixDQUFBOztBQUFBO0FBR2UsRUFBQSxlQUFDLE9BQUQsR0FBQTtB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O0FBQUEsSUFLQSxLQUFBLEVBQU8sTUFMUDtBQUFBLElBTUEsQ0FBQSxFQUFHLEVBTkg7R0FYSjtBQUFBLEVBbUJBLGFBQUEsRUFDSTtBQUFBLElBQUEsT0FBQSxFQUFTLElBQVQ7R0FwQko7QUFBQSxFQXNCQSxTQUFBLEVBQ0k7QUFBQSxJQUFBLEdBQUEsRUFBSyxDQUFMO0FBQUEsSUFDQSxJQUFBLEVBQU0sYUFETjtBQUFBLElBVUEsUUFBQSxFQUFVLFNBVlY7QUFBQSxJQVdBLFFBQUEsRUFBVSxTQVhWO0dBdkJKO0FBQUEsRUEyQ0EsTUFBQSxFQUFRO0lBQ0o7QUFBQSxNQUFBLFNBQUEsRUFBVztBQUFBLFFBQ1AsUUFBQSxFQUFVLElBREg7T0FBWDtBQUFBLE1BR0EsSUFBQSxFQUFNLElBSE47QUFBQSxNQUlBLE9BQUEsRUFBUyxJQUpUO0FBQUEsTUFLQSxNQUFBLEVBQVEsSUFMUjtBQUFBLE1BTUEsVUFBQSxFQUFZO0FBQUEsUUFDUixPQUFBLEVBQVMsSUFERDtBQUFBLFFBRVIsS0FBQSxFQUFPLE9BRkM7QUFBQSxRQUdSLE1BQUEsRUFBUSxjQUhBO09BTlo7QUFBQSxNQVdBLElBQUEsRUFBTSxPQVhOO0FBQUEsTUFZQSxPQUFBLEVBQVM7QUFBQSxRQUNMLFdBQUEsRUFBYSxpQ0FEUjtPQVpUO0tBREk7R0EzQ1I7QUFBQSxFQTZEQSxTQUFBLEVBRUk7QUFBQSxJQUFBLG9CQUFBLEVBQ0k7QUFBQSxNQUFBLEtBQUEsRUFBTyxPQUFQO0FBQUEsTUFDQSxjQUFBLEVBQWdCLE1BRGhCO0tBREo7QUFBQSxJQUlBLGFBQUEsRUFDRTtBQUFBLE1BQUEsVUFBQSxFQUFZLFlBQVo7QUFBQSxNQUNBLFFBQUEsRUFDRTtBQUFBLFFBQUEsQ0FBQSxFQUFHLENBQUg7QUFBQSxRQUNBLENBQUEsRUFBRyxDQURIO09BRkY7S0FMRjtHQS9ESjtDQURGLENBQUEiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKX12YXIgZj1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwoZi5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxmLGYuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiXG5TV01hcCA9IHJlcXVpcmUgJy4vc2NyaXB0L1NXTWFwJ1xuXG4jIHVuZW1wbG95bWVudF91c19kYXRhID0gcmVxdWlyZSAnLi9zY3JpcHQvc3R1YmRhdGEvdXMtc3RhdGVzLXVuZW1wbG95bWVudC5qcydcbiMgJC5lYWNoIHVuZW1wbG95bWVudF91c19kYXRhLCAtPlxuIyAgICAgdGhpcy5jb2RlID0gdGhpcy5jb2RlLnRvVXBwZXJDYXNlKClcbiMgICAgIHRoaXMuZHJpbGxkb3duID0gdHJ1ZVxuXG5kYXRhID0gSGlnaGNoYXJ0cy5nZW9qc29uKEhpZ2hjaGFydHMubWFwc1snY3VzdG9tL3dvcmxkJ10pO1xuXG4jU2V0IGEgbm9uLXJhbmRvbSBib2d1cyB2YWx1ZVxuZm9yIHAsIGkgaW4gZGF0YVxuICBwLnZhbHVlID0gaSsxXG4gIHAuZHJpbGxkb3duID0gdHJ1ZVxuXG51bmVtcGxveW1lbnRfbWFwID0gbmV3IFNXTWFwXG4gIGRhdGE6IGRhdGFcblxuJCAtPlxuICB1bmVtcGxveW1lbnRfbWFwLmF0dGFjaCgkKCcjbWFwJykpO1xuICBcblxuXG4iLCJcbmRlZmF1bHRfb3B0cyA9IHJlcXVpcmUgJy4vc3dfbWFwX29wdGlvbnMnXG5cbmNsYXNzIFNXTWFwXG4gIGNvbnN0cnVjdG9yOiAob3B0aW9ucykgLT5cbiAgICAgICAgXG4gICAgdGhpcy5vcHRzID0gZGVmYXVsdF9vcHRzXG4gICAgc2VyaWVzID0gdGhpcy5vcHRzLnNlcmllc1swXVxuICAgIHNlcmllcy5kYXRhID0gb3B0aW9ucy5kYXRhXG4gICAgc2VyaWVzLm1hcERhdGEgPSBvcHRpb25zLm1hcERhdGFcbiAgICBzZXJpZXMuam9pbkJ5ID0gb3B0aW9ucy5qb2luQnlcbiAgICBcbiAgICB0aGlzLm9wdHMuY2hhcnQuZXZlbnRzLmRyaWxsZG93biA9IChlKSA9PlxuICAgICAgdGhpcy5faGFuZGxlX2RyaWxsZG93biBlXG4gICAgXG4gICAgdGhpcy5vcHRzLmNoYXJ0LmV2ZW50cy5kcmlsbHVwID0gKGUpID0+XG4gICAgICB0aGlzLl9oYW5kbGVfZHJpbGx1cCBlXG4gIFxuICBhdHRhY2g6ICgkZWwpIC0+XG4gICAgdGhpcy5jaGFydCA9ICRlbC5oaWdoY2hhcnRzICdNYXAnLCB0aGlzLm9wdHNcbiAgXG4gIF9oYW5kbGVfZHJpbGxkb3duOiAoZSkgLT5cbiAgICBjaGFydCA9IGUuY3VycmVudFRhcmdldFxuICAgIFxuICAgICMgSSBiZWxpZXZlIHNlcmllc09wdGlvbnMgaXMgc2V0IGlmIHdlIGhhdmUgYWxyZWFkeSBsb2FkZWQgdGhlIG1hcCBkYXRhXG4gICAgaWYgIWUuc2VyaWVzT3B0aW9uc1xuICAgICAgbWFwX2tleSA9IHRoaXMuX21hcF9rZXlfZnJvbV9wb2ludCBlLnBvaW50XG4gICAgICBcbiAgICAgIGlmICFIaWdoY2hhcnRzLm1hcHNbbWFwX2tleV1cbiAgICAgICAgIyBGb250IEF3ZXNvbWUgc3Bpbm5lclxuICAgICAgICBjaGFydC5zaG93TG9hZGluZygnPGkgY2xhc3M9XCJpY29uLXNwaW5uZXIgaWNvbi1zcGluIGljb24tM3hcIj48L2k+Jyk7IFxuICAgICAgICBcbiAgICAgICAgJC5nZXRTY3JpcHQgdGhpcy5fbWFwX2RhdGFfdXJsKG1hcF9rZXkpXG4gICAgICAgICAgLmRvbmUgPT5cbiAgICAgICAgICAgIHRoaXMuX2RvX2RyaWxsZG93biBjaGFydCwgZS5wb2ludCwgbWFwX2tleVxuICAgICAgICAgICAgY2hhcnQuaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgICAuZmFpbCA9PlxuICAgICAgICAgICAgY29uc29sZS5sb2coJ2ZhaWxlZCB0byBnZXQgbWFwIGRhdGEuJylcbiAgICAgICAgICAgIGNoYXJ0LmhpZGVMb2FkaW5nKClcbiAgICAgICAgXG4gICAgICBlbHNlXG4gICAgICAgIHRoaXMuX2RvX2RyaWxsZG93biBjaGFydCwgZS5wb2ludCwgbWFwX2tleVxuICBcbiAgX2RvX2RyaWxsZG93bjogKGNoYXJ0LCBwb2ludCwgbWFwX2tleSkgLT5cbiAgICAgIGRhdGEgPSBIaWdoY2hhcnRzLmdlb2pzb24oSGlnaGNoYXJ0cy5tYXBzW21hcF9rZXldKTtcblxuICAgICAgI1NldCBhIG5vbi1yYW5kb20gYm9ndXMgdmFsdWVcbiAgICAgIGZvciBwLCBpIGluIGRhdGFcbiAgICAgICAgcC52YWx1ZSA9IGkrMVxuICAgICAgICBwLmRyaWxsZG93biA9IHRoaXMuX3BvaW50X2Nhbl9kcmlsbGRvd24ocClcbiAgICAgIFxuICAgICAgI0hpZGUgbG9hZGluZyBhbmQgYWRkIHNlcmllc1xuICAgICAgY2hhcnQuYWRkU2VyaWVzQXNEcmlsbGRvd24ocG9pbnQsIHtcbiAgICAgICAgICBuYW1lOiBwb2ludC5uYW1lLFxuICAgICAgICAgIGRhdGE6IGRhdGEsXG4gICAgICAgICAgZGF0YUxhYmVsczoge1xuICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgICAgICBmb3JtYXQ6ICd7cG9pbnQubmFtZX0nXG4gICAgICAgICAgfVxuICAgICAgfSk7XG4gIFxuICBfbWFwX2tleV9mcm9tX3BvaW50OiAocG9pbnQpIC0+XG4gICAgaGNfa2V5ID0gcG9pbnQucHJvcGVydGllc1snaGMta2V5J11cbiAgICBwYXJ0cyA9IGhjX2tleS5zcGxpdCgnLScpXG4gICAgXG4gICAgaWYgbm90IHBhcnRzLmxlbmd0aFxuICAgICAgcmV0dXJuIHVuZGVmaW5lZFxuICAgIFxuICAgIGNvdW50cnkgPSBwYXJ0c1swXTtcbiAgICBcbiAgICBhbnMgPSBcImNvdW50cmllcy8je2NvdW50cnl9LyN7aGNfa2V5fS1hbGxcIlxuICAgIHJldHVybiBhbnNcbiAgXG4gIF9tYXBfZGF0YV91cmw6IChtYXBfa2V5KSAtPlxuICAgIHJldHVybiAnaHR0cDovL2NvZGUuaGlnaGNoYXJ0cy5jb20vbWFwZGF0YS8nICsgbWFwX2tleSArICcuanMnXG4gIFxuICBfcG9pbnRfY2FuX2RyaWxsZG93bjogKHBvaW50KSAtPlxuICAgIGhjX2tleSA9IHBvaW50LnByb3BlcnRpZXNbJ2hjLWtleSddXG4gICAgcGFydHMgPSBoY19rZXkuc3BsaXQoJy0nKVxuICAgIFxuICAgIGlmIG5vdCBwYXJ0cy5sZW5ndGhcbiAgICAgICMgaW52YWxpZCBrZXlcbiAgICAgIHJldHVybiBmYWxzZVxuICAgIFxuICAgIGlmIHBhcnRzLmxlbmd0aCA9PSAxXG4gICAgICAjIGFzc3VtZSBhbGwgY291bnRyeSBsZXZlbCBrZXlzIGNhbiBkcmlsbFxuICAgICAgcmV0dXJuIHRydWVcbiAgICBcbiAgICBpZiBwYXJ0cy5sZW5ndGggPT0gMiAmJiBwYXJ0c1swXSA9PSAndXMnXG4gICAgICAjIGFsbCBVUyBzdGF0ZXMgY2FuIGRyaWxsXG4gICAgICByZXR1cm4gdHJ1ZVxuICAgIFxuICAgIHJldHVybiBmYWxzZVxuICBcbiAgX2hhbmRsZV9kcmlsbHVwOiAoZSkgLT5cbiAgICBjb25zb2xlLmxvZyAnZHJpbGwgdXAnXG5cbm1vZHVsZS5leHBvcnRzID0gU1dNYXAiLCJtb2R1bGUuZXhwb3J0cyA9XG4gIGNoYXJ0OlxuICAgICAgYm9yZGVyV2lkdGg6IDAsXG4gICAgICBib3JkZXJDb2xvcjogJyM3NTlGMDAnLFxuICAgICAgZXZlbnRzOlxuICAgICAgICBkcmlsbGRvd246IG51bGwsXG4gICAgICAgIGRyaWxsdXA6IG51bGxcblxuICB0aXRsZTpcbiAgICAgIHRleHQgOiAnV2FpdmVycydcblxuICBsZWdlbmQ6XG4gICAgICBsYXlvdXQ6ICd2ZXJ0aWNhbCcsXG4gICAgICBib3JkZXJXaWR0aDogMCxcbiAgICAgIGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMjU1LDI1NSwyNTUsMC44NSknLFxuICAgICAgZmxvYXRpbmc6IGZhbHNlLFxuICAgICAgdmVydGljYWxBbGlnbjogJ21pZGRsZScsXG4gICAgICBhbGlnbjogJ2xlZnQnLFxuICAgICAgeTogNTBcblxuICBtYXBOYXZpZ2F0aW9uOlxuICAgICAgZW5hYmxlZDogdHJ1ZVxuXG4gIGNvbG9yQXhpczpcbiAgICAgIG1pbjogMSxcbiAgICAgIHR5cGU6ICdsb2dhcml0aG1pYycsXG4gICAgICAjIG1pbkNvbG9yOiAnI0VFRUVGRicsXG4gICAgICAjIG1heENvbG9yOiAnIzAwMDAyMicsXG4gICAgICAjIHN0b3BzOiBbXG4gICAgICAjICAgICBbMCwgJyNFRkVGRkYnXSxcbiAgICAgICMgICAgIFswLjY3LCAnIzQ0NDRGRiddLFxuICAgICAgIyAgICAgWzEsICcjMDAwMDIyJ11cbiAgICAgICMgXVxuXG4gICAgICBtaW5Db2xvcjogJyNGRkZGRkYnLFxuICAgICAgbWF4Q29sb3I6ICcjNzU5RjAwJyxcbiAgICAgICMgc3RvcHM6IFtcbiAgICAgICMgICAgIFswLCAnI0VGRUZGRiddLFxuICAgICAgIyAgICAgWzAuNjcsICcjNDQ0NEZGJ10sXG4gICAgICAjICAgICBbMSwgJyMwMDAwMjInXVxuICAgICAgIyBdXG4gICAgICBcbiAgICAgICMgU1cgR3JlZW4gIzc1OUYwMFxuXG4gIHNlcmllczogW1xuICAgICAgYW5pbWF0aW9uOiB7XG4gICAgICAgICAgZHVyYXRpb246IDEwMDBcbiAgICAgIH0sXG4gICAgICBkYXRhOiBudWxsLFxuICAgICAgbWFwRGF0YTogbnVsbCxcbiAgICAgIGpvaW5CeTogbnVsbCxcbiAgICAgIGRhdGFMYWJlbHM6IHtcbiAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgIGNvbG9yOiAnd2hpdGUnLFxuICAgICAgICAgIGZvcm1hdDogJ3twb2ludC5uYW1lfSdcbiAgICAgIH0sXG4gICAgICBuYW1lOiAnV29ybGQnLFxuICAgICAgdG9vbHRpcDoge1xuICAgICAgICAgIHBvaW50Rm9ybWF0OiAne3BvaW50Lm5hbWV9OiB7cG9pbnQudmFsdWV9L2ttwrInXG4gICAgICB9XG4gIF1cbiAgXG4gIGRyaWxsZG93bjpcbiAgICAgICNzZXJpZXM6IGRyaWxsZG93blNlcmllcyxcbiAgICAgIGFjdGl2ZURhdGFMYWJlbFN0eWxlOlxuICAgICAgICAgIGNvbG9yOiAnd2hpdGUnLFxuICAgICAgICAgIHRleHREZWNvcmF0aW9uOiAnbm9uZSdcbiAgICAgIFxuICAgICAgZHJpbGxVcEJ1dHRvbjpcbiAgICAgICAgcmVsYXRpdmVUbzogJ3NwYWNpbmdCb3gnLCAgICAgICAgXG4gICAgICAgIHBvc2l0aW9uOlxuICAgICAgICAgIHg6IDAsXG4gICAgICAgICAgeTogMFxuICAgICAgICAgIFxuICAgICAgICAgICMgcG9zaXRpb246XG4gICAgICAgICAgIyAgICAgeDogMCxcbiAgICAgICAgICAjICAgICB5OiA2MFxuIl19
